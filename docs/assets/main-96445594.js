import{s as w,d as v}from"./drawTextLines-99ea9044.js";const f=400,u=700,g={text:`Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt _~^,|... 

  花子は、古びたアトリエで縦書きCanvasに思いを馳せていた。彼女の心は、過去の情熱的な絵画と未来の可能性とで彩られていた。CanvasRenderingContext2Dを通じて、彼女の筆が魔法のように踊り、色と形が交じり合う。「その魔法のキャンバスには、季節が舞い、想像が咲く」。花子の作品は、縦書きならではの風情が溢れ、心の底からの芸術の詩となるのだった。`,initialStyle:{fontFamily:"sans-serif",fontSize:20,fontColor:"#333",fontWeight:f,fontStyle:"normal"},styles:[{at:5,style:{fontFamily:'"Times"',fontWeight:u,fontSize:36,fontColor:"#39a"}},{at:12,style:{fontFamily:'"Hiragino Maru Gothic Pro"',fontSize:18,fontColor:"#777"}},{at:22,style:{fontWeight:u,fontSize:32,fontColor:"#ea3"}},{at:27,style:{fontWeight:f,fontColor:"#777"}},{at:58,style:{fontColor:"#f63",fontSize:40}},{at:61,style:{fontColor:"#777",fontSize:18}},{at:103,style:{fontFamily:"'Zen Kurenaido'",fontColor:"#777",fontSize:18}}],lineHeight:1.5,align:"left",direction:"horizontal"};const l=e=>document.querySelector(e),m=l("#app"),t={wrapWidth:500,debug:!1,isVertical:g.direction==="vertical",lineHeight:g.lineHeight,align:g.align,onUpdate:()=>{}},y=()=>{const e=l("#wrapWidth");e.value=t.wrapWidth.toString();const d=l("#wrapWidthValue");e.addEventListener("input",()=>{d.innerText=e.value+"px",t.wrapWidth=e.valueAsNumber,t.onUpdate()});const s=l("#debug");s.checked=t.debug,s.addEventListener("change",i=>{t.debug=i.target.checked,t.onUpdate()});const o=l("#vertical");o.checked=t.isVertical,o.addEventListener("change",i=>{t.isVertical=i.target.checked,t.onUpdate()});const r=l("#lineHeight");r.value=t.lineHeight.toString();const n=l("#lineHeightValue");r.addEventListener("input",()=>{n.innerText=r.value,t.lineHeight=r.valueAsNumber,t.onUpdate()});const a=l("#textAlign");a.value=t.align,a.addEventListener("change",i=>{const c=i.target.value,h=["left","center","right"].find(p=>p===c);h&&(t.align=h,t.onUpdate())})},W=()=>{const e=document.createElement("canvas"),d=e.getContext("2d");e.style.border="1px solid black",m.appendChild(e);const s={wrapWidth:t.wrapWidth,isVertical:t.isVertical};let o;const r=()=>{w(t.debug);const n={...g};n.align=t.align,n.lineHeight=t.lineHeight,n.direction=t.isVertical?"vertical":"horizontal";const a=n.direction==="vertical";e.style.writingMode=a?"vertical-rl":"horizontal-tb";const i=e.width/2,c=e.height/2,h=a?i:0,p=a?c:i;console.time("drawText"),o=v(d,n,h,0,p,o),console.timeEnd("drawText")};t.onUpdate=()=>{const n=t.isVertical,a=800,i=n?a:t.wrapWidth,c=n?t.wrapWidth:a;e.width=i*2,e.height=c*2,e.style.width=`${i}px`,e.style.height=`${c}px`,d.resetTransform(),d.scale(2,2),s.isVertical!==t.isVertical&&(o=void 0),s.wrapWidth!==t.wrapWidth&&o&&(o.lineBreaks=void 0),s.wrapWidth=t.wrapWidth,s.isVertical=t.isVertical,r()},y(),t.onUpdate()},x=async()=>{await document.fonts.ready,window.requestAnimationFrame(t.onUpdate)};W();x();
